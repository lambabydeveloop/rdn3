{% extends 'base.html.twig' %}

{% block title %}
    {{ seo.title|default('Контакты - RDN.BY') }}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        /* Brutalist map styling overrides */
        .leaflet-container {
            font-family: 'Inter', sans-serif !important;
            border: 1px solid black;
        }
        .leaflet-popup-content-wrapper {
            border-radius: 0 !important;
            border: 1px solid black;
            box-shadow: 4px 4px 0px 0px rgba(0,0,0,1) !important;
        }
        .leaflet-popup-tip {
            border-top: 1px solid black;
            border-left: 1px solid black;
        }
        .filter-grayscale {
            filter: grayscale(100%) contrast(1.2);
        }
    </style>
{% endblock %}

{% block body %}
    <main class="relative bg-white z-10 w-full overflow-hidden" id="main-content">
        
        {# Hero Секция #}
        <section class="section-overlap bg-white relative z-10 pt-48 pb-24 px-6 lg:px-12 border-b border-gray-200" id="contacts-hero">
            <div class="max-w-7xl mx-auto">
                <div class="flex justify-between items-end mb-8 js-reveal text-xs md:text-sm font-bold tracking-widest text-gray-500 uppercase">
                    <span>СВЯЗАТЬСЯ С НАМИ</span>
                    <span class="text-black">ШТАБ-КВАРТИРА / МИНСК</span>
                </div>
                <h1 class="text-[13vw] sm:text-[10vw] md:text-9xl break-words hyphens-auto leading-none font-black tracking-tighter uppercase mb-8 js-reveal">
                    ГЛОБАЛЬНЫЙ<br>ОХВАТ
                </h1>
                <hr class="border-black mb-16 js-reveal">
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-12 js-reveal text-lg text-black font-medium uppercase tracking-widest">
                    <div class="md:col-span-1 text-gray-400 text-[10px] font-bold">ИНФОРМАЦИЯ</div>
                    <div class="md:col-span-1">
                        <a href="tel:+375291234567" class="hover:text-gray-500 transition-colors inline-block pb-1 border-b border-black hover:border-gray-500">+375 25 999 74 90</a><br>
                        <span class="text-[10px] text-gray-400">9:00 - 21:00 ПН-ВС</span>
                    </div>
                    <div class="md:col-span-1">
                        <a href="mailto:info@digital.pro" class="hover:text-gray-500 transition-colors inline-block pb-1 border-b border-black hover:border-gray-500">INFO@RDN.BY</a><br>
                        <span class="text-[10px] text-gray-400">ОТВЕТ В ТЕЧЕНИЕ 2 ЧАСОВ</span>
                    </div>
                    <div class="md:col-span-1">
                        <div class="flex flex-col space-y-2">
                            <a href="#" class="hover:text-gray-500 transition-colors">TELEGRAM</a>
                            <a href="#" class="hover:text-gray-500 transition-colors">LINKEDIN</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        {# HQ & Map Section #}
        <section class="section-overlap bg-[rgb(249,249,249)] relative z-10 py-32 px-6 lg:px-12" id="contacts-map">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-2xl font-black tracking-widest uppercase mb-16 border-b border-black pb-4 js-reveal">ГЛАВНЫЙ ОФИС</h2>
                
                <div class="grid lg:grid-cols-12 gap-12 js-reveal">
                    <!-- Text Info -->
                    <div class="lg:col-span-4">
                        <address class="not-italic text-xl text-black font-light leading-relaxed mb-8">
                            ул. Скрыганова, 14<br>
                            офис 502, БЦ «Космонавт»<br>
                            Минск, 220030
                        </address>
                        <p class="text-xs text-gray-500 font-bold tracking-widest uppercase mb-4">КАК ДОБРАТЬСЯ</p>
                        <ul class="text-sm text-gray-600 space-y-2 border-l border-gray-300 pl-4">
                            <li>5 Мин от м. Площадь Победы</li>
                            <li>Вход с проспекта Независимости</li>
                            <li>Этаж 5, левое крыло</li>
                        </ul>
                    </div>
                    
                    <!-- Leaflet Map -->
                    <div class="lg:col-span-8 h-[500px] bg-gray-200 border border-black relative z-10 filter-grayscale" id="map">
                        <!-- Map injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        {# Legal Documents #}
        <section class="section-overlap bg-black text-white relative z-10 py-32 px-6 lg:px-12" id="contacts-legal">
            <div class="max-w-7xl mx-auto js-reveal">
                <h2 class="text-2xl font-black tracking-widest uppercase mb-16 border-b border-gray-800 pb-4 text-gray-400">ЮРИДИЧЕСКАЯ ИНФОРМАЦИЯ</h2>
                
                <div class="grid lg:grid-cols-2 gap-16">
                    <!-- Legal Info -->
                    <div>
                        <ul class="space-y-6 text-sm font-medium tracking-wide">
                            <li class="flex justify-between border-b border-gray-800 pb-4">
                                <span class="text-gray-500 uppercase text-[10px] font-bold">Организация</span>
                                <span>ООО «Диджитал Про»</span>
                            </li>
                            <li class="flex justify-between border-b border-gray-800 pb-4">
                                <span class="text-gray-500 uppercase text-[10px] font-bold">УНП</span>
                                <span>123456789</span>
                            </li>
                            <li class="flex justify-between border-b border-gray-800 pb-4 hidden md:flex">
                                <span class="text-gray-500 uppercase text-[10px] font-bold">Юридический адрес</span>
                                <span class="text-right">220030, г. Минск, ул. Скрыганова,<br>д. 14, офис 502</span>
                            </li>
                            <li class="flex justify-between border-b border-gray-800 pb-4">
                                <span class="text-gray-500 uppercase text-[10px] font-bold">Р/с</span>
                                <span>BY00 1234 5678 9012 3456 7890 1234</span>
                            </li>
                            <li class="flex justify-between border-b border-gray-800 pb-4">
                                <span class="text-gray-500 uppercase text-[10px] font-bold">Банк</span>
                                <span>ОАО «Банк развития»</span>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Documents -->
                    <div class="space-y-4">
                        <a href="#" class="group flex items-center justify-between p-6 border border-gray-800 hover:border-gray-500 transition-colors bg-white/5">
                            <div>
                                <p class="font-bold text-lg uppercase mb-1">Договор на оказание услуг</p>
                                <p class="text-[10px] text-gray-400 font-bold tracking-widest">PDF / 245 KB</p>
                            </div>
                            <span class="material-symbols-outlined transform group-hover:translate-x-2 transition-transform">arrow_forward</span>
                        </a>
                        <a href="#" class="group flex items-center justify-between p-6 border border-gray-800 hover:border-gray-500 transition-colors bg-white/5">
                            <div>
                                <p class="font-bold text-lg uppercase mb-1">Политика конфиденциальности</p>
                                <p class="text-[10px] text-gray-400 font-bold tracking-widest">PDF / 180 KB</p>
                            </div>
                            <span class="material-symbols-outlined transform group-hover:translate-x-2 transition-transform">arrow_forward</span>
                        </a>
                        <a href="#" class="group flex items-center justify-between p-6 border border-gray-800 hover:border-gray-500 transition-colors bg-white/5">
                            <div>
                                <p class="font-bold text-lg uppercase mb-1">Реквизиты компании</p>
                                <p class="text-[10px] text-gray-400 font-bold tracking-widest">PDF / 120 KB</p>
                            </div>
                            <span class="material-symbols-outlined transform group-hover:translate-x-2 transition-transform">arrow_forward</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    {# Leaflet JS #}
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    {# GSAP & Map Initialization #}
    <script>
        document.addEventListener('RDNLibsLoaded', () => {
            // Leaflet Init
            if(document.getElementById('map')) {
                const map = L.map('map', {
                    scrollWheelZoom: false // disable scroll zoom so it doesn't hook the page scroll
                }).setView([53.9045, 27.5615], 15);

                // Using cartodb light layer for a stark white/gray map to match brutalist aesthetic
                L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; OpenStreetMap contributors'
                }).addTo(map);

                const customIcon = L.divIcon({
                    className: 'custom-pin',
                    html: `<div style="background: black; width: 16px; height: 16px; border-radius: 50%;"></div>`,
                    iconSize: [16, 16],
                    iconAnchor: [8, 8]
                });

                L.marker([53.9045, 27.5615], {icon: customIcon}).addTo(map)
                    .bindPopup(`<strong style="text-transform:uppercase; font-size:12px;">RDN.BY HQ</strong>`);
            }

            // GSAP Animations
            if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') return;
            gsap.registerPlugin(ScrollTrigger);

            const revealElements = document.querySelectorAll('.js-reveal');
            revealElements.forEach((el) => {
                gsap.fromTo(el, 
                    { y: 40, opacity: 0 }, 
                    {
                        y: 0, 
                        opacity: 1,
                        duration: 1,
                        ease: 'power3.out',
                        scrollTrigger: {
                            trigger: el,
                            start: 'top 85%',
                            toggleActions: 'play none none reverse'
                        }
                    }
                );
            });

            // Parallax Section Effect Layering
            const sections = document.querySelectorAll('.section-overlap');
            sections.forEach((section, index) => {
                section.style.zIndex = index + 10;
                if (index > 0) {
                    const prevSection = sections[index - 1];
                    gsap.to(prevSection, {
                        yPercent: 15,
                        ease: "none",
                        scrollTrigger: {
                            trigger: section,
                            start: "top bottom",
                            end: "top top",
                            scrub: true
                        }
                    });
                }
            });
        });
    </script>
{% endblock %}
